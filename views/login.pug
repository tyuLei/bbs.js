extends basic-layout.pug

block content
  form(action="/login", method="post")
    div 用户名
      input(type="text" name="name")
      span.tip
    div 密码
      input(type='password' name="password")
      span.tip
    div
    button 登陆
  script.
    let loginForm = document.querySelector("form")

    //- post
    loginForm.onsubmit = function(e){
      e.preventDefault()
      $.post("/login", {
        name: loginForm.elements.name.value,
        password: loginForm.elements.password.value,
      }).then(result => {
        if(result.code == 0){
          alert(result.msg)
          location.href = "/"
        } else {
          alert(result.msg)
        }
      })



    }